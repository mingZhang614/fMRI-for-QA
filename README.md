<h2 align="center"> Neural Mechanisms of Visual Quality Perception and Adaptability in Visual Pathway <div align=center> </a></h2>
<h5 align="center"> Under Submission.</h5>

## Overview
![Overview](assets/Figure 1.png)


## fMRI Data
The download link for the raw fMRI data in BIDS format is [this](https://drive.google.com/drive/folders/1t00nvm791Dsm3jJ6cXqUXg2MCYBBNKLQ?usp=sharing)。

The fMRI data will be made publicly available on OpenNeuro after acceptance of the manuscript but before its publication.

The experimental images and onset time for the fMRI experiment are stored in the `Event` folder, 
while all fMRI beta vectors used for analysis are stored in the `betas` folder.

## Statistical analyses
In Section 2.2, univariate analysis is conducted using SPM12, 
while seed-based functional connectivity analysis is performed using the CONN toolbox. 
No customized code is used for these analyses. 
Detailed steps can be found in the Methods section of the manuscript.

## Representation similarity analysis
In Section 2.3 of the manuscript, the analysis codes are located in the `RSA` folder.

The script for generating the representation dissimilarity matrix (RDM) shown in Figure 3a is`AllTask_2side_RDM.py`.

For Figure 3b, the 'Ideal Semantic Label' and 'Ideal Quality Label' are generated by 
the scripts`ideal_RDM.py` and `ideal_RDM_2.py`, respectively.

The quality information content for different ROIs in Figure 3c is obtained 
using the script`compare_brainVSideal_diffCate_2side.py`.

The Semantic information content for different brain regions in Figures 3d and 3e 
is derived from the script`compare_brainVSideal_diffQua_2side.py`.

## Building the response pattern prediction model between ROIs
In Section 2.4 of the manuscript, the analysis codes are located in the `Mappings` folder

Model establishment and training between brain regions are performed 
using the script`system_decode_reverse.py`.

The data analysis for Figure 4a and Figure 4b is performed using the scripts 
`system_decode_analyse_bad_reverse.py` and 
`system_decode_analyse_good_reverse.py`, respectively.

## Predicting visual quality using response patterns of ROI pairs
In Section 2.5 of the manuscript, the analysis codes 
are located in the `QaulityDecode`folder.

The model training code for decoding visual quality from fMRI data is `SVR_simple_AllROI.py`.

The analysis code for decoding results, specifically for the data 
presented in Figure 5, is `simple_AllROI_analyse.py`

## Brain-inspired multi-layer feature fusion strategy for artificial neural networks
The CNN model and its training code, 
as well as the data analysis code mentioned in Section 2.6 of the manuscript, 
are located in the `CNNexperiment` folder.

Model structure: `CNNexperiment/model`

Training codes: `CNNexperiment/train`

Model performance results: `CNNexperiment/result`

Results analyse：`CNNexperiment/stat`

## Contact
If the editor or reviewers have any other requirements regarding the data or code, 
please feel free to contact us.

Email: ming_zhang_sjtu@sjtu.edu.cn
